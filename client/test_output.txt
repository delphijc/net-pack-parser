
> client@0.0.0 test
> vitest run


[1m[46m RUN [49m[22m [36mv4.0.14 [39m[90m/Users/delphijc/Projects/net-pack-parser/client[39m

[90mstdout[2m | src/utils/stringExtractor.test.ts[2m > [22m[2mstringExtractor[2m > [22m[2mshould post a message to the worker with the correct payload
[22m[39m[StringExtractor] Sending request 93707276-2994-408d-aadf-d48c36103ec6 to worker

[90mstdout[2m | src/utils/stringExtractor.test.ts[2m > [22m[2mstringExtractor[2m > [22m[2mshould resolve with extracted strings on success
[22m[39m[StringExtractor] Sending request 319d4ad0-7981-433f-b0b3-a5c3dc49deb9 to worker
[StringExtractor] Received response for undefined, status: success

 [31mâ¯[39m src/services/iocService.test.ts [2m([22m[2m8 tests[22m[2m | [22m[31m8 failed[39m[2m)[22m[32m 2[2mms[22m[39m
[31m     [31mÃ—[31m should add and retrieve an IOC[39m[32m 1[2mms[22m[39m
[31m     [31mÃ—[31m should remove an IOC[39m[32m 0[2mms[22m[39m
[31m     [31mÃ—[31m should retrieve IOCs by type[39m[32m 0[2mms[22m[39m
[31m     [31mÃ—[31m should import IOCs (merge mode)[39m[32m 0[2mms[22m[39m
[31m     [31mÃ—[31m should import IOCs (replace mode)[39m[32m 0[2mms[22m[39m
[31m     [31mÃ—[31m should maintain cache consistency[39m[32m 0[2mms[22m[39m
[31m     [31mÃ—[31m should not cache disabled IOCs[39m[32m 0[2mms[22m[39m
[31m     [31mÃ—[31m should clear cache on clearAll[39m[32m 0[2mms[22m[39m
 [32mâœ“[39m src/components/ExtractedStringsTab.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[32m 277[2mms[22m[39m
 [32mâœ“[39m src/components/ThreatPanel.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[32m 252[2mms[22m[39m
[90mstderr[2m | src/components/FileInfo.test.tsx[2m > [22m[2mFileInfo[2m > [22m[2mshould display "Verification Error" on API failure
[22m[39mError during integrity verification: Error: Test error
    at [90m/Users/delphijc/Projects/net-pack-parser/client/[39msrc/components/FileInfo.test.tsx:89:22
    at Mock [90m(file:///Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4m@vitest/spy[24m/dist/index.js:280:34[90m)[39m
    at handleVerify [90m(/Users/delphijc/Projects/net-pack-parser/client/[39msrc/components/FileInfo.tsx:28:28[90m)[39m
    at executeDispatch [90m(/Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:19116:9[90m)[39m
    at runWithFiberInDEV [90m(/Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:874:13[90m)[39m
    at processDispatchQueue [90m(/Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:19166:19[90m)[39m
    at [90m/Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:19767:9
    at batchedUpdates$1 [90m(/Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:3255:40[90m)[39m
    at dispatchEventForPluginEventSystem [90m(/Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:19320:7[90m)[39m
    at dispatchEvent [90m(/Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:23585:11[90m)[39m

 [32mâœ“[39m src/components/FileInfo.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[32m 148[2mms[22m[39m
 [32mâœ“[39m src/components/ThreatPanel.xss.test.tsx [2m([22m[2m1 test[22m[2m)[22m[32m 112[2mms[22m[39m
 [32mâœ“[39m src/components/PacketDetailView.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[33m 498[2mms[22m[39m
 [31mâ¯[39m src/components/SettingsPage.test.tsx [2m([22m[2m8 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 615[2mms[22m[39m
     [32mâœ“[39m renders the settings page with storage usage[32m 39[2mms[22m[39m
     [32mâœ“[39m shows a confirmation dialog when "Clear All Local Data" is clicked[32m 143[2mms[22m[39m
[31m     [31mÃ—[31m calls clearAll when confirmation is accepted[39m[32m 152[2mms[22m[39m
     [32mâœ“[39m triggers export when "Export Data" is clicked[32m 20[2mms[22m[39m
     [32mâœ“[39m opens confirmation dialog when a file is selected for import[32m 55[2mms[22m[39m
     [32mâœ“[39m calls importDataFromJson with "merge" mode when Merge is clicked[32m 61[2mms[22m[39m
     [32mâœ“[39m calls importDataFromJson with "replace" mode when Replace is clicked[32m 71[2mms[22m[39m
     [32mâœ“[39m displays error toast when import fails[32m 71[2mms[22m[39m
[90mstderr[2m | src/components/FilesTab.test.tsx[2m > [22m[2mFilesTab[2m > [22m[2mrenders detected files
[22m[39mIn HTML, whitespace text nodes cannot be a child of <tr>. Make sure you don't have any extra whitespace between tags on each line of your source code.
This will cause a hydration error.

  <FilesTab packet={{id:"packet-1", ...}}>
    <div className="p-4">
      <Table>
        <div className="relative w...">
          <table ref={null} className="w-full cap...">
            <TableCaption>
            <TableHeader>
            <TableBody>
              <tbody ref={null} className={"[&_tr:la..."}>
                <TableRow>
>                 <tr ref={null} className="border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted">
                    <TableCell>
                    <TableCell>
                    <TableCell>
                    <TableCell>
>                   {" "}
                    ...


 [32mâœ“[39m src/components/ProtocolFilter.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[32m 30[2mms[22m[39m
[90mstdout[2m | src/components/FilesTab.test.tsx[2m > [22m[2mFilesTab[2m > [22m[2mhandles file download
[22m[39mDownloaded file: test.txt, Hash: hash123
Chain of Custody event logged

[90mstderr[2m | src/components/FilesTab.test.tsx[2m > [22m[2mFilesTab[2m > [22m[2mdisplays message when no files detected
[22m[39mAn update to FilesTab inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

Not implemented: navigation to another Document
 [32mâœ“[39m src/components/FilesTab.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[32m 96[2mms[22m[39m
 [32mâœ“[39m src/utils/stringExtractorCore.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32mâœ“[39m src/components/FilterBar.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[32m 42[2mms[22m[39m
[90mstderr[2m | src/utils/dataImportExport.test.ts[2m > [22m[2mdataImportExport[2m > [22m[2mimportDataFromJson[2m > [22m[2mshould fail if the file format is invalid
[22m[39mImport failed: Error: Invalid import file format: missing metadata or data section.
    at Module.importDataFromJson [90m(/Users/delphijc/Projects/net-pack-parser/client/[39msrc/utils/dataImportExport.ts:86:13[90m)[39m
    at [90m/Users/delphijc/Projects/net-pack-parser/client/[39msrc/utils/dataImportExport.test.ts:163:22
    at [90mfile:///Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:919:26
    at [90mfile:///Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1244:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1210:10[90m)[39m
    at [90mfile:///Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1654:37
    at Traces.$ [90m(file:///Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4mvitest[24m/dist/chunks/test.DqQZzsWf.js:234:21[90m)[39m

[90mstderr[2m | src/utils/dataImportExport.test.ts[2m > [22m[2mdataImportExport[2m > [22m[2mimportDataFromJson[2m > [22m[2mshould fail if the schema version is different
[22m[39mImport failed: Error: Invalid schema version. Expected 1.0, but file is version 0.9.
    at Module.importDataFromJson [90m(/Users/delphijc/Projects/net-pack-parser/client/[39msrc/utils/dataImportExport.ts:93:13[90m)[39m
    at [90m/Users/delphijc/Projects/net-pack-parser/client/[39msrc/utils/dataImportExport.test.ts:180:22
    at [90mfile:///Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:919:26
    at [90mfile:///Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1244:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1210:10[90m)[39m
    at [90mfile:///Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1654:37
    at Traces.$ [90m(file:///Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4mvitest[24m/dist/chunks/test.DqQZzsWf.js:234:21[90m)[39m

 [32mâœ“[39m src/utils/dataImportExport.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 8[2mms[22m[39m
[90mstderr[2m | src/components/parser/PcapUpload.test.tsx[2m > [22m[2mPcapUpload Component[2m > [22m[2mrenders correctly
[22m[39mAn update to ChainOfCustodyLog inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 [32mâœ“[39m src/utils/sqlInjectionDetector.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32mâœ“[39m src/components/FalsePositivesTab.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[32m 40[2mms[22m[39m
 [32mâœ“[39m src/components/parser/PcapUpload.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[32m 70[2mms[22m[39m
 [31mâ¯[39m src/components/PacketList.integration.test.tsx [2m([22m[2m7 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 1388[2mms[22m[39m
     [32mâœ“[39m should render PacketList, ProtocolFilter, and ProtocolDistributionChart[32m 48[2mms[22m[39m
     [32mâœ“[39m should filter packets by selected protocol[32m 32[2mms[22m[39m
     [32mâœ“[39m should display detected protocols as badges in PacketList[32m 14[2mms[22m[39m
     [32mâœ“[39m should update the ProtocolDistributionChart when packets change[32m 44[2mms[22m[39m
     [32mâœ“[39m should open PacketDetailView with correct packet data when a packet is clicked[32m 33[2mms[22m[39m
     [32mâœ“[39m should clear selected packet and close detail view when "Clear all packets" is confirmed[32m 34[2mms[22m[39m
[31m     [31mÃ—[31m should clear selected packet and close detail view when selected packet is deleted[39m[33m 1179[2mms[22m[39m
 [32mâœ“[39m src/utils/fileExtractor.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 12[2mms[22m[39m
 [32mâœ“[39m src/services/localStorage.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 12[2mms[22m[39m
 [32mâœ“[39m src/utils/xssDetector.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32mâœ“[39m src/utils/sensitiveDataDetector.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 12[2mms[22m[39m
 [32mâœ“[39m src/utils/pcapUtils.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32mâœ“[39m src/utils/sqlInjectionPatterns.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 20[2mms[22m[39m
 [32mâœ“[39m src/utils/multiCriteriaSearch.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32mâœ“[39m src/components/AdvancedSearchPanel.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[33m 1914[2mms[22m[39m
     [33m[2mâœ“[22m[39m allows entering criteria and submitting search [33m 702[2mms[22m[39m
     [33m[2mâœ“[22m[39m saves a new search configuration [33m 438[2mms[22m[39m
 [32mâœ“[39m src/components/HexDumpViewer.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32mâœ“[39m src/utils/hashGenerator.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32mâœ“[39m src/store/alertStore.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 2[2mms[22m[39m
 [32mâœ“[39m src/utils/protocolDetector.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32mâœ“[39m src/utils/bpfFilter.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32mâœ“[39m src/utils/iocDetector.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32mâœ“[39m src/utils/commandInjectionDetector.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32mâœ“[39m src/services/mitreService.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 2[2mms[22m[39m
 [32mâœ“[39m src/utils/directoryTraversalDetector.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 2[2mms[22m[39m
 [32mâœ“[39m src/services/yaraEngine.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 1[2mms[22m[39m
 [32mâœ“[39m src/utils/pcapUtils.verification.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 1[2mms[22m[39m
[90mstdout[2m | src/utils/stringExtractor.test.ts[2m > [22m[2mstringExtractor[2m > [22m[2mshould reject with an error on failure
[22m[39m[StringExtractor] Sending request 4ec30724-9778-44f5-a7a4-41e48e86ceae to worker
[StringExtractor] Received response for undefined, status: error

[90mstdout[2m | src/utils/stringExtractor.test.ts[2m > [22m[2mstringExtractor[2m > [22m[2mshould reject with a default error message if none provided on failure
[22m[39m[StringExtractor] Sending request 99886cdf-0308-4f6c-a6a2-91e7b406e5df to worker
[StringExtractor] Received response for undefined, status: error

[90mstdout[2m | src/utils/stringExtractor.test.ts[2m > [22m[2mstringExtractor[2m > [22m[2mshould reject when worker throws an error event
[22m[39m[StringExtractor] Sending request 91f235ea-a4ce-4b66-831d-8245180f539b to worker

[90mstderr[2m | src/utils/stringExtractor.test.ts[2m > [22m[2mstringExtractor[2m > [22m[2mshould reject when worker throws an error event
[22m[39mWorker error: { message: [32m'Worker crashed'[39m }

 [31mâ¯[39m src/utils/stringExtractor.test.ts [2m([22m[2m6 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[33m 15041[2mms[22m[39m
     [32mâœ“[39m should instantiate the worker[32m 22[2mms[22m[39m
[31m     [31mÃ—[31m should post a message to the worker with the correct payload[39m[32m 6[2mms[22m[39m
[31m     [31mÃ—[31m should resolve with extracted strings on success[39m[33m 5004[2mms[22m[39m
[31m     [31mÃ—[31m should reject with an error on failure[39m[33m 5003[2mms[22m[39m
[31m     [31mÃ—[31m should reject with a default error message if none provided on failure[39m[33m 5001[2mms[22m[39m
     [32mâœ“[39m should reject when worker throws an error event[32m 2[2mms[22m[39m

[31mâ¯â¯â¯â¯â¯â¯[39m[1m[41m Failed Suites 1 [49m[22m[31mâ¯â¯â¯â¯â¯â¯â¯[39m

[41m[1m FAIL [22m[49m src/services/pcapParser.test.ts[2m [ src/services/pcapParser.test.ts ][22m
[31m[1mReferenceError[22m: Worker is not defined[39m
[36m [2mâ¯[22m src/utils/stringExtractor.ts:[2m9:32[22m[39m
    [90m  7| [39m
    [90m  8| [39m[90m// Create a new Web Worker instance[39m
    [90m  9| [39m[35mconst[39m stringExtractionWorker [33m=[39m [35mnew[39m [33mWorker[39m(
    [90m   | [39m                               [31m^[39m
    [90m 10| [39m  [35mnew[39m [33mURL[39m([32m'../workers/stringExtractionWorker.ts'[39m[33m,[39m [35mimport[39m[33m.[39mmeta[33m.[39murl)[33m,[39m
    [90m 11| [39m  { type[33m:[39m [32m'module'[39m }[33m,[39m
[90m [2mâ¯[22m src/services/pcapParser.ts:[2m1:1[22m[39m
[90m [2mâ¯[22m src/services/pcapParser.test.ts:[2m2:1[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/15]â¯[22m[39m


[31mâ¯â¯â¯â¯â¯â¯[39m[1m[41m Failed Tests 14 [49m[22m[31mâ¯â¯â¯â¯â¯â¯â¯[39m

[41m[1m FAIL [22m[49m src/components/PacketList.integration.test.tsx[2m > [22mPacketList Integration with ProtocolFilter, PacketDetailView and ProtocolDistributionChart[2m > [22mshould clear selected packet and close detail view when selected packet is deleted
[31m[1mAssertionError[22m[39m: expected "vi.fn()" to be called with arguments: [ 'packet-1' ][90m

Number of calls: [1m0[22m
[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body[39m
    [33mdata-scroll-locked[39m=[32m"1"[39m
    [33mstyle[39m=[32m"pointer-events: none;"[39m
  [36m>[39m
    [36m<span[39m
      [33maria-hidden[39m=[32m"true"[39m
      [33mdata-aria-hidden[39m=[32m"true"[39m
      [33mdata-radix-focus-guard[39m=[32m""[39m
      [33mstyle[39m=[32m"outline: none; opacity: 0; position: fixed; pointer-events: none;"[39m
      [33mtabindex[39m=[32m"0"[39m
    [36m/>[39m
    [36m<div[39m
      [33maria-hidden[39m=[32m"true"[39m
      [33mdata-aria-hidden[39m=[32m"true"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"grid grid-cols-3 gap-6 h-screen"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"col-span-1 flex flex-col space-y-4"[39m
        [36m>[39m
          [36m<select[39m
            [33mdata-testid[39m=[32m"select-protocol-filter"[39m
          [36m>[39m
            [36m<div[39m
              [33mdata-testid[39m=[32m"select-trigger"[39m
            [36m>[39m
              [36m<span[39m
                [33mdata-testid[39m=[32m"select-value"[39m
              [36m>[39m
                [0mFilter by Protocol[0m
              [36m</span>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mdata-testid[39m=[32m"select-content"[39m
            [36m>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"all"[39m
              [36m>[39m
                [0mAll Protocols[0m
              [36m</option>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"TCP"[39m
              [36m>[39m
                [0mTCP[0m
              [36m</option>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"HTTP"[39m
              [36m>[39m
                [0mHTTP[0m
              [36m</option>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"UDP"[39m
              [36m>[39m
                [0mUDP[0m
              [36m</option>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"DNS"[39m
              [36m>[39m
                [0mDNS[0m
              [36m</option>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"HTTPS"[39m
              [36m>[39m
                [0mHTTPS[0m
              [36m</option>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"SSH"[39m
              [36m>[39m
                [0mSSH[0m
              [36m</option>[39m
            [36m</div>[39m
          [36m</select>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-card border border-white/10 rounded-lg shadow-sm flex flex-col overflow-hidden backdrop-blur-sm h-full"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"p-3 border-b border-white/10 bg-card/50"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex justify-between items-center mb-3"[39m
              [36m>[39m
                [36m<h2[39m
                  [33mclass[39m=[32m"text-sm font-semibold flex items-center text-foreground"[39m
                [36m>[39m
                  [0mCaptured Packets[0m
                  [36m<span[39m
                    [33mclass[39m=[32m"ml-2 text-xs bg-secondary px-2 py-0.5 rounded-full text-muted-foreground"[39m
                  [36m>[39m
                    [0m4[0m
                  [36m</span>[39m
                [36m</h2>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"text-xs text-destructive hover:text-destructive/80 flex items-center transition-colors"[39m
                  [33mtitle[39m=[32m"Clear all packets"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-trash2 lucide-trash-2 mr-1"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"14"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"14"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M10 11v6"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M14 11v6"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M3 6h18"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mClear[0m
                [36m</button>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex space-x-2 mb-3"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"relative flex-1"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-2.5 text-muted-foreground"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"14"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"14"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"m21 21-4.34-4.34"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"11"[39m
                      [33mcy[39m=[32m"11"[39m
                      [33mr[39m=[32m"8"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [36m<input[39m
                    [33mclass[39m=[32m"w-full bg-secondary border border-white/10 rounded-md pl-9 pr-3 py-2 text-xs focus:ou...
[36m [2mâ¯[22m src/components/PacketList.integration.test.tsx:[2m467:37[22m[39m
    [90m465| [39m
    [90m466| [39m    [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m467| [39m      [34mexpect[39m(database[33m.[39mdeletePacket)[33m.[39m[34mtoHaveBeenCalledWith[39m([32m'packet-1'[39m)[33m;[39m
    [90m   | [39m                                    [31m^[39m
    [90m468| [39m      [34mexpect[39m(
    [90m469| [39m        screen[33m.[39m[34mqueryByTestId[39m([32m'mock-packet-detail-view'[39m)[33m,[39m
[90m [2mâ¯[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2mâ¯[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2mâ¯[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/15]â¯[22m[39m

[41m[1m FAIL [22m[49m src/components/SettingsPage.test.tsx[2m > [22mSettingsPage[2m > [22mcalls clearAll when confirmation is accepted
[31m[1mAssertionError[22m: expected "vi.fn()" to be called at least once[39m
[36m [2mâ¯[22m src/components/SettingsPage.test.tsx:[2m68:42[22m[39m
    [90m 66| [39m    [35mawait[39m user[33m.[39m[34mclick[39m(continueButton)[33m;[39m
    [90m 67| [39m
    [90m 68| [39m    [34mexpect[39m(localStorageService[33m.[39mclearAll)[33m.[39m[34mtoHaveBeenCalled[39m()[33m;[39m
    [90m   | [39m                                         [31m^[39m
    [90m 69| [39m    [34mexpect[39m(mockToast)[33m.[39m[34mtoHaveBeenCalledWith[39m(
    [90m 70| [39m      expect[33m.[39m[34mobjectContaining[39m({

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/15]â¯[22m[39m

[41m[1m FAIL [22m[49m src/services/iocService.test.ts[2m > [22mIOCService[2m > [22mshould add and retrieve an IOC
[41m[1m FAIL [22m[49m src/services/iocService.test.ts[2m > [22mIOCService[2m > [22mshould remove an IOC
[41m[1m FAIL [22m[49m src/services/iocService.test.ts[2m > [22mIOCService[2m > [22mshould retrieve IOCs by type
[41m[1m FAIL [22m[49m src/services/iocService.test.ts[2m > [22mIOCService[2m > [22mshould import IOCs (merge mode)
[41m[1m FAIL [22m[49m src/services/iocService.test.ts[2m > [22mIOCService[2m > [22mshould import IOCs (replace mode)
[41m[1m FAIL [22m[49m src/services/iocService.test.ts[2m > [22mIOCService[2m > [22mshould maintain cache consistency
[41m[1m FAIL [22m[49m src/services/iocService.test.ts[2m > [22mIOCService[2m > [22mshould not cache disabled IOCs
[41m[1m FAIL [22m[49m src/services/iocService.test.ts[2m > [22mIOCService[2m > [22mshould clear cache on clearAll
[31m[1mReferenceError[22m: IDBRequest is not defined[39m
[90m [2mâ¯[22m wrap node_modules/idb/build/index.js:[2m143:26[22m[39m
[90m [2mâ¯[22m openDB node_modules/idb/build/index.js:[2m169:25[22m[39m
[36m [2mâ¯[22m IOCService.initDB src/services/iocService.ts:[2m42:12[22m[39m
    [90m 40| [39m
    [90m 41| [39m  [35mprivate[39m [35masync[39m [34minitDB[39m() {
    [90m 42| [39m    [35mreturn[39m openDB[33m<[39m[33mIOCDB[39m[33m>[39m([33mDB_NAME[39m[33m,[39m [33mDB_VERSION[39m[33m,[39m {
    [90m   | [39m           [31m^[39m
    [90m 43| [39m      [34mupgrade[39m(db) {
    [90m 44| [39m        [35mconst[39m store [33m=[39m db[33m.[39m[34mcreateObjectStore[39m([32m'iocs'[39m[33m,[39m { keyPath[33m:[39m [32m'id'[39m })[33m;[39m
[90m [2mâ¯[22m new IOCService src/services/iocService.ts:[2m37:27[22m[39m
[90m [2mâ¯[22m src/services/iocService.ts:[2m187:27[22m[39m
[90m [2mâ¯[22m src/services/iocService.test.ts:[2m6:1[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[4/15]â¯[22m[39m

[41m[1m FAIL [22m[49m src/utils/stringExtractor.test.ts[2m > [22mstringExtractor[2m > [22mshould post a message to the worker with the correct payload
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ { payload: , â€¦(2) }, [  ] ][90m

Received: 

[1m  1st vi.fn() call:

[22m[33m@@ -10,10 +10,11 @@[90m
[2m        0,[22m
[2m        0,[22m
[2m        0,[22m
[2m      ],[22m
[2m      "payloadOffset": 0,[22m
[31m+     "requestId": "93707276-2994-408d-aadf-d48c36103ec6",[90m
[2m    },[22m
[2m    [[22m
[2m      ArrayBuffer [[22m
[2m        0,[22m
[2m        0,[22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2mâ¯[22m src/utils/stringExtractor.test.ts:[2m67:44[22m[39m
    [90m 65| [39m    [34mextractStrings[39m(mockPayload[33m,[39m mockPacketId[33m,[39m mockOffset)[33m;[39m
    [90m 66| [39m
    [90m 67| [39m    [34mexpect[39m(lastCreatedWorker[33m?.[39mpostMessage)[33m.[39m[34mtoHaveBeenCalledWith[39m(
    [90m   | [39m                                           [31m^[39m
    [90m 68| [39m      {
    [90m 69| [39m        payload[33m:[39m mockPayload[33m,[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[5/15]â¯[22m[39m

[41m[1m FAIL [22m[49m src/utils/stringExtractor.test.ts[2m > [22mstringExtractor[2m > [22mshould resolve with extracted strings on success
[31m[1mError[22m: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[36m [2mâ¯[22m src/utils/stringExtractor.test.ts:[2m77:3[22m[39m
    [90m 75| [39m  })[33m;[39m
    [90m 76| [39m
    [90m 77| [39m  [34mit[39m([32m'should resolve with extracted strings on success'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m   | [39m  [31m^[39m
    [90m 78| [39m    [35mconst[39m mockPayload [33m=[39m [35mnew[39m [33mArrayBuffer[39m([34m8[39m)[33m;[39m
    [90m 79| [39m    [35mconst[39m mockPacketId [33m=[39m [32m'packet-1'[39m[33m;[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[6/15]â¯[22m[39m

[41m[1m FAIL [22m[49m src/utils/stringExtractor.test.ts[2m > [22mstringExtractor[2m > [22mshould reject with an error on failure
[31m[1mError[22m: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[36m [2mâ¯[22m src/utils/stringExtractor.test.ts:[2m104:3[22m[39m
    [90m102| [39m  })[33m;[39m
    [90m103| [39m
    [90m104| [39m  [34mit[39m([32m'should reject with an error on failure'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m   | [39m  [31m^[39m
    [90m105| [39m    [35mconst[39m mockPayload [33m=[39m [35mnew[39m [33mArrayBuffer[39m([34m8[39m)[33m;[39m
    [90m106| [39m    [35mconst[39m promise [33m=[39m [34mextractStrings[39m(mockPayload[33m,[39m [32m'packet-1'[39m[33m,[39m [34m0[39m)[33m;[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[7/15]â¯[22m[39m

[41m[1m FAIL [22m[49m src/utils/stringExtractor.test.ts[2m > [22mstringExtractor[2m > [22mshould reject with a default error message if none provided on failure
[31m[1mError[22m: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[36m [2mâ¯[22m src/utils/stringExtractor.test.ts:[2m117:3[22m[39m
    [90m115| [39m  })[33m;[39m
    [90m116| [39m
    [90m117| [39m  it('should reject with a default error message if none provided on fâ€¦
    [90m   | [39m  [31m^[39m
    [90m118| [39m    [35mconst[39m mockPayload [33m=[39m [35mnew[39m [33mArrayBuffer[39m([34m8[39m)[33m;[39m
    [90m119| [39m    [35mconst[39m promise [33m=[39m [34mextractStrings[39m(mockPayload[33m,[39m [32m'packet-1'[39m[33m,[39m [34m0[39m)[33m;[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[8/15]â¯[22m[39m

[31mâ¯â¯â¯â¯â¯â¯[39m[1m[41m Unhandled Errors [49m[22m[31mâ¯â¯â¯â¯â¯â¯[39m
[31m[1m
Vitest caught 2 unhandled errors during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.[22m[39m

[31mâ¯â¯â¯â¯[39m[1m[41m Unhandled Rejection [49m[22m[31mâ¯â¯â¯â¯â¯[39m
[31m[1mReferenceError[22m: IDBRequest is not defined[39m
[90m [2mâ¯[22m wrap node_modules/idb/build/index.js:[2m143:26[22m[39m
[90m [2mâ¯[22m openDB node_modules/idb/build/index.js:[2m169:25[22m[39m
[36m [2mâ¯[22m IOCService.initDB src/services/iocService.ts:[2m42:12[22m[39m
    [90m 40| [39m
    [90m 41| [39m  [35mprivate[39m [35masync[39m [34minitDB[39m() {
    [90m 42| [39m    [35mreturn[39m openDB[33m<[39m[33mIOCDB[39m[33m>[39m([33mDB_NAME[39m[33m,[39m [33mDB_VERSION[39m[33m,[39m {
    [90m   | [39m           [31m^[39m
    [90m 43| [39m      [34mupgrade[39m(db) {
    [90m 44| [39m        [35mconst[39m store [33m=[39m db[33m.[39m[34mcreateObjectStore[39m([32m'iocs'[39m[33m,[39m { keyPath[33m:[39m [32m'id'[39m })[33m;[39m
[90m [2mâ¯[22m new IOCService src/services/iocService.ts:[2m37:27[22m[39m
[90m [2mâ¯[22m src/services/iocService.ts:[2m187:27[22m[39m
[90m [2mâ¯[22m processTicksAndRejections node:internal/process/task_queues:[2m103:5[22m[39m
[90m [2mâ¯[22m VitestModuleEvaluator._runInlinedModule node_modules/vitest/dist/module-evaluator.js:[2m190:4[22m[39m
[90m [2mâ¯[22m VitestModuleRunner.directRequest node_modules/vite/dist/node/module-runner.js:[2m1146:59[22m[39m
[90m [2mâ¯[22m VitestModuleRunner.cachedRequest node_modules/vite/dist/node/module-runner.js:[2m1053:73[22m[39m
[90m [2mâ¯[22m src/services/iocService.test.ts:[2m6:1[22m[39m

[31mThis error originated in "[1msrc/services/iocService.test.ts[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m

[31mâ¯â¯â¯â¯[39m[1m[41m Unhandled Rejection [49m[22m[31mâ¯â¯â¯â¯â¯[39m
[31m[1mError[22m: Worker crashed[39m
[36m [2mâ¯[22m src/utils/stringExtractor.ts:[2m49:7[22m[39m
    [90m 47| [39m  pendingRequests[33m.[39m[34mforEach[39m((pending) [33m=>[39m {
    [90m 48| [39m    pending[33m.[39m[34mreject[39m(
    [90m 49| [39m      [35mnew[39m [33mError[39m(error[33m.[39mmessage [33m||[39m [32m'Error in string extraction worker'[39m)[33m,[39m
    [90m   | [39m      [31m^[39m
    [90m 50| [39m    )[33m;[39m
    [90m 51| [39m  })[33m;[39m
[90m [2mâ¯[22m MockWorker.stringExtractionWorker.onerror src/utils/stringExtractor.ts:[2m47:19[22m[39m
[90m [2mâ¯[22m MockWorker.emitError src/utils/stringExtractor.test.ts:[2m29:12[22m[39m
[90m [2mâ¯[22m src/utils/stringExtractor.test.ts:[2m136:24[22m[39m
[90m [2mâ¯[22m node_modules/@vitest/runner/dist/index.js:[2m145:11[22m[39m
[90m [2mâ¯[22m node_modules/@vitest/runner/dist/index.js:[2m919:26[22m[39m
[90m [2mâ¯[22m node_modules/@vitest/runner/dist/index.js:[2m1244:20[22m[39m
[90m [2mâ¯[22m runWithTimeout node_modules/@vitest/runner/dist/index.js:[2m1210:10[22m[39m

[31mThis error originated in "[1msrc/utils/stringExtractor.test.ts[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m
[31mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[39m


[2m Test Files [22m [1m[31m5 failed[39m[22m[2m | [22m[1m[32m32 passed[39m[22m[90m (37)[39m
[2m      Tests [22m [1m[31m14 failed[39m[22m[2m | [22m[1m[32m235 passed[39m[22m[90m (249)[39m
[2m     Errors [22m [1m[31m2 errors[39m[22m
[2m   Start at [22m 20:56:49
[2m   Duration [22m 15.64s[2m (transform 1.18s, setup 1.48s, import 3.43s, tests 20.65s, environment 11.45s)[22m

