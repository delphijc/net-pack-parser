
> client@0.0.0 test
> vitest run


 RUN  v4.0.14 /home/jaysoncavendish/Projects/net-pack-parser/client

 ✓ src/components/SettingsPage.test.tsx (8 tests) 6301ms
     ✓ renders the settings page with storage usage  522ms
     ✓ shows a confirmation dialog when "Clear All Local Data" is clicked  2341ms
     ✓ calls clearAll when confirmation is accepted  1225ms
     ✓ opens confirmation dialog when a file is selected for import  316ms
     ✓ calls importDataFromJson with "merge" mode when Merge is clicked  563ms
     ✓ calls importDataFromJson with "replace" mode when Replace is clicked  418ms
     ✓ displays error toast when import fails  695ms
 ✓ src/components/PacketDetailView.test.tsx (6 tests) 6165ms
     ✓ renders packet details correctly  2830ms
     ✓ displays Hex Dump tab content by default  552ms
     ✓ switches to Extracted Strings tab  852ms
     ✓ displays the Threats tab and its content  877ms
     ✓ passes correct highlightRanges to HexDumpViewer for threats  631ms
     ✓ does not pass threat highlightRanges if no threats are provided  410ms
 ✓ src/components/ExtractedStringsTab.test.tsx (6 tests) 2771ms
     ✓ filters strings by type  986ms
     ✓ sorts strings by column  1046ms
 ✓ src/components/PacketList.integration.test.tsx (7 tests) 2521ms
     ✓ should render PacketList, ProtocolFilter, and ProtocolDistributionChart  631ms
     ✓ should update the ProtocolDistributionChart when packets change  376ms
     ✓ should clear selected packet and close detail view when "Clear all packets" is confirmed  360ms
     ✓ should clear selected packet and close detail view when selected packet is deleted  464ms
 ✓ src/components/AdvancedSearchPanel.test.tsx (6 tests) 19784ms
     ✓ renders all search fields correctly  4061ms
     ✓ allows entering criteria and submitting search  7667ms
     ✓ clears all fields when Clear All is clicked  631ms
     ✓ saves a new search configuration  3537ms
     ✓ loads a saved search  1664ms
     ✓ deletes a saved search  2205ms
stderr | src/components/FileInfo.test.tsx > FileInfo > should display "Verification Error" on API failure
Error during integrity verification: Error: Test error
    at /home/jaysoncavendish/Projects/net-pack-parser/client/src/components/FileInfo.test.tsx:89:22
    at Mock (file:///home/jaysoncavendish/Projects/net-pack-parser/client/node_modules/@vitest/spy/dist/index.js:280:34)
    at handleVerify (/home/jaysoncavendish/Projects/net-pack-parser/client/src/components/FileInfo.tsx:28:28)
    at executeDispatch (/home/jaysoncavendish/Projects/net-pack-parser/client/node_modules/react-dom/cjs/react-dom-client.development.js:19116:9)
    at runWithFiberInDEV (/home/jaysoncavendish/Projects/net-pack-parser/client/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
    at processDispatchQueue (/home/jaysoncavendish/Projects/net-pack-parser/client/node_modules/react-dom/cjs/react-dom-client.development.js:19166:19)
    at /home/jaysoncavendish/Projects/net-pack-parser/client/node_modules/react-dom/cjs/react-dom-client.development.js:19767:9
    at batchedUpdates$1 (/home/jaysoncavendish/Projects/net-pack-parser/client/node_modules/react-dom/cjs/react-dom-client.development.js:3255:40)
    at dispatchEventForPluginEventSystem (/home/jaysoncavendish/Projects/net-pack-parser/client/node_modules/react-dom/cjs/react-dom-client.development.js:19320:7)
    at dispatchEvent (/home/jaysoncavendish/Projects/net-pack-parser/client/node_modules/react-dom/cjs/react-dom-client.development.js:23585:11)

 ✓ src/components/FileInfo.test.tsx (4 tests) 2473ms
     ✓ should call onVerifyIntegrity when the button is clicked  1549ms
     ✓ should display "Mismatch Detected!" when hashes do not match  306ms
     ✓ should display "Verification Error" on API failure  324ms
 ✓ src/components/ThreatPanel.test.tsx (7 tests) 2415ms
     ✓ calls onUpdateThreatStatus with "falsePositive" when "Mark as False Positive" button is clicked  1071ms
     ✓ calls onUpdateThreatStatus with "confirmed" when "Mark as Confirmed" button is clicked  321ms
     ✓ disables "Mark as False Positive" button if threat is already falsePositive  332ms
stderr | src/components/parser/PcapUpload.test.tsx > PcapUpload Component > renders correctly
An update to ChainOfCustodyLog inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 ✓ src/components/parser/PcapUpload.test.tsx (3 tests) 622ms
 ✓ src/components/FilterBar.test.tsx (5 tests) 480ms
     ✓ renders correctly  321ms
stderr | src/components/FilesTab.test.tsx > FilesTab > renders detected files
In HTML, whitespace text nodes cannot be a child of <tr>. Make sure you don't have any extra whitespace between tags on each line of your source code.
This will cause a hydration error.

  <FilesTab packet={{id:"packet-1", ...}}>
    <div className="p-4">
      <Table>
        <div className="relative w...">
          <table ref={null} className="w-full cap...">
            <TableCaption>
            <TableHeader>
            <TableBody>
              <tbody ref={null} className={"[&_tr:la..."}>
                <TableRow>
>                 <tr ref={null} className="border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted">
                    <TableCell>
                    <TableCell>
                    <TableCell>
                    <TableCell>
>                   {" "}
                    ...


stdout | src/components/FilesTab.test.tsx > FilesTab > handles file download
Downloaded file: test.txt, Hash: hash123
Chain of Custody event logged

stderr | src/components/FilesTab.test.tsx > FilesTab > displays message when no files detected
An update to FilesTab inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

Not implemented: navigation to another Document
 ✓ src/components/FilesTab.test.tsx (3 tests) 749ms
     ✓ renders detected files  481ms
 ✓ src/components/ProtocolFilter.test.tsx (5 tests) 458ms
 ✓ src/services/localStorage.test.ts (7 tests) 97ms
 ✓ src/utils/stringExtractorCore.test.ts (13 tests) 58ms
 ✓ src/utils/protocolDetector.test.ts (17 tests) 52ms
 ✓ src/utils/sqlInjectionPatterns.test.ts (18 tests) 50ms
stderr | src/utils/dataImportExport.test.ts > dataImportExport > importDataFromJson > should fail if the file format is invalid
Import failed: Error: Invalid import file format: missing metadata or data section.
    at Module.importDataFromJson (/home/jaysoncavendish/Projects/net-pack-parser/client/src/utils/dataImportExport.ts:84:13)
    at /home/jaysoncavendish/Projects/net-pack-parser/client/src/utils/dataImportExport.test.ts:163:22
    at file:///home/jaysoncavendish/Projects/net-pack-parser/client/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///home/jaysoncavendish/Projects/net-pack-parser/client/node_modules/@vitest/runner/dist/index.js:919:26
    at file:///home/jaysoncavendish/Projects/net-pack-parser/client/node_modules/@vitest/runner/dist/index.js:1244:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///home/jaysoncavendish/Projects/net-pack-parser/client/node_modules/@vitest/runner/dist/index.js:1210:10)
    at file:///home/jaysoncavendish/Projects/net-pack-parser/client/node_modules/@vitest/runner/dist/index.js:1654:37
    at Traces.$ (file:///home/jaysoncavendish/Projects/net-pack-parser/client/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///home/jaysoncavendish/Projects/net-pack-parser/client/node_modules/vitest/dist/chunks/test.DqQZzsWf.js:234:21)

stderr | src/utils/dataImportExport.test.ts > dataImportExport > importDataFromJson > should fail if the schema version is different
Import failed: Error: Invalid schema version. Expected 1.0, but file is version 0.9.
    at Module.importDataFromJson (/home/jaysoncavendish/Projects/net-pack-parser/client/src/utils/dataImportExport.ts:91:13)
    at /home/jaysoncavendish/Projects/net-pack-parser/client/src/utils/dataImportExport.test.ts:180:22
    at file:///home/jaysoncavendish/Projects/net-pack-parser/client/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///home/jaysoncavendish/Projects/net-pack-parser/client/node_modules/@vitest/runner/dist/index.js:919:26
    at file:///home/jaysoncavendish/Projects/net-pack-parser/client/node_modules/@vitest/runner/dist/index.js:1244:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///home/jaysoncavendish/Projects/net-pack-parser/client/node_modules/@vitest/runner/dist/index.js:1210:10)
    at file:///home/jaysoncavendish/Projects/net-pack-parser/client/node_modules/@vitest/runner/dist/index.js:1654:37
    at Traces.$ (file:///home/jaysoncavendish/Projects/net-pack-parser/client/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///home/jaysoncavendish/Projects/net-pack-parser/client/node_modules/vitest/dist/chunks/test.DqQZzsWf.js:234:21)

 ✓ src/utils/dataImportExport.test.ts (5 tests) 67ms
 ✓ src/components/HexDumpViewer.test.tsx (7 tests) 14ms
 ✓ src/utils/stringExtractor.test.ts (6 tests) 98ms
 ✓ src/utils/fileExtractor.test.ts (20 tests) 51ms
 ✓ src/services/pcapParser.test.ts (3 tests) 82ms
 ✓ src/utils/bpfFilter.test.ts (8 tests) 77ms
 ✓ src/utils/hashGenerator.test.ts (4 tests) 23ms
 ✓ src/utils/sqlInjectionDetector.test.ts (17 tests) 90ms
 ✓ src/utils/multiCriteriaSearch.test.ts (11 tests) 12ms

 Test Files  24 passed (24)
      Tests  196 passed (196)
   Start at  12:18:11
   Duration  57.19s (transform 5.64s, setup 9.39s, import 22.98s, tests 45.51s, environment 72.88s)

