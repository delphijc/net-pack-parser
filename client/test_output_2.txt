
> client@0.0.0 test
> vitest run


[1m[46m RUN [49m[22m [36mv4.0.14 [39m[90m/Users/delphijc/Projects/net-pack-parser/client[39m

[90mstdout[2m | src/utils/stringExtractor.test.ts[2m > [22m[2mstringExtractor[2m > [22m[2mshould post a message to the worker with the correct payload
[22m[39m[StringExtractor] Sending request 3a4584ef-c824-4191-8d09-5a6cc38f15cd to worker

[90mstdout[2m | src/utils/stringExtractor.test.ts[2m > [22m[2mstringExtractor[2m > [22m[2mshould resolve with extracted strings on success
[22m[39m[StringExtractor] Sending request 266ae248-8ea2-4f69-9160-e8865261a642 to worker
[StringExtractor] Received response for undefined, status: success

 [32m‚úì[39m src/services/iocService.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 20[2mms[22m[39m
[90mstdout[2m | src/services/pcapParser.test.ts[2m > [22m[2mpcapParser[2m > [22m[2mshould parse PCAP binary data correctly
[22m[39m[StringExtractor] Sending request e0d9b21f-3ea1-4f5c-aa59-67cc4f19c0d3 to worker

[90mstdout[2m | src/components/SettingsPage.test.tsx
[22m[39mIndexedDB upgrade complete.

[90mstdout[2m | src/components/SettingsPage.test.tsx
[22m[39mIndexedDB for File References opened successfully.

[90mstdout[2m | src/components/SettingsPage.test.tsx
[22m[39mIndexedDB opened successfully for Chain of Custody.

[90mstdout[2m | src/components/PacketDetailView.test.tsx
[22m[39mIndexedDB upgrade complete.

[90mstdout[2m | src/components/PacketDetailView.test.tsx
[22m[39mIndexedDB for File References opened successfully.

[90mstdout[2m | src/components/PacketDetailView.test.tsx
[22m[39mIndexedDB opened successfully for Chain of Custody.

 [32m‚úì[39m src/components/ExtractedStringsTab.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[32m 296[2mms[22m[39m
[90mstdout[2m | src/components/SettingsPage.test.tsx[2m > [22m[2mSettingsPage[2m > [22m[2mcalls clearAll when confirmation is accepted
[22m[39mAll File Chain of Custody events cleared.

 [32m‚úì[39m src/components/ThreatPanel.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[32m 274[2mms[22m[39m
[90mstderr[2m | src/services/pcapParser.test.ts[2m > [22m[2mpcapParser[2m > [22m[2mshould parse PCAP binary data correctly
[22m[39mError extracting strings for packet 9757804f-141e-453b-ac2c-532ee9cf8e39: Error: String extraction timed out
    at Timeout._onTimeout [90m(/Users/delphijc/Projects/net-pack-parser/client/[39msrc/services/pcapParser.ts:168:26[90m)[39m
[90m    at listOnTimeout (node:internal/timers:605:17)[39m
[90m    at processTimers (node:internal/timers:541:7)[39m

 [32m‚úì[39m src/services/pcapParser.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 512[2mms[22m[39m
     [33m[2m‚úì[22m[39m should parse PCAP binary data correctly [33m 505[2mms[22m[39m
 [32m‚úì[39m src/components/PacketDetailView.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[33m 406[2mms[22m[39m
 [31m‚ùØ[39m src/components/SettingsPage.test.tsx [2m([22m[2m8 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 575[2mms[22m[39m
     [32m‚úì[39m renders the settings page with storage usage[32m 28[2mms[22m[39m
     [32m‚úì[39m shows a confirmation dialog when "Clear All Local Data" is clicked[32m 152[2mms[22m[39m
[31m     [31m√ó[31m calls clearAll when confirmation is accepted[39m[32m 89[2mms[22m[39m
     [32m‚úì[39m triggers export when "Export Data" is clicked[32m 36[2mms[22m[39m
     [32m‚úì[39m opens confirmation dialog when a file is selected for import[32m 64[2mms[22m[39m
     [32m‚úì[39m calls importDataFromJson with "merge" mode when Merge is clicked[32m 79[2mms[22m[39m
     [32m‚úì[39m calls importDataFromJson with "replace" mode when Replace is clicked[32m 68[2mms[22m[39m
     [32m‚úì[39m displays error toast when import fails[32m 52[2mms[22m[39m
[90mstderr[2m | src/components/FileInfo.test.tsx[2m > [22m[2mFileInfo[2m > [22m[2mshould display "Verification Error" on API failure
[22m[39mError during integrity verification: Error: Test error
    at [90m/Users/delphijc/Projects/net-pack-parser/client/[39msrc/components/FileInfo.test.tsx:89:22
    at Mock [90m(file:///Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4m@vitest/spy[24m/dist/index.js:280:34[90m)[39m
    at handleVerify [90m(/Users/delphijc/Projects/net-pack-parser/client/[39msrc/components/FileInfo.tsx:28:28[90m)[39m
    at executeDispatch [90m(/Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:19116:9[90m)[39m
    at runWithFiberInDEV [90m(/Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:874:13[90m)[39m
    at processDispatchQueue [90m(/Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:19166:19[90m)[39m
    at [90m/Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:19767:9
    at batchedUpdates$1 [90m(/Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:3255:40[90m)[39m
    at dispatchEventForPluginEventSystem [90m(/Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:19320:7[90m)[39m
    at dispatchEvent [90m(/Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:23585:11[90m)[39m

 [32m‚úì[39m src/components/FileInfo.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[32m 186[2mms[22m[39m
[90mstderr[2m | src/components/FilesTab.test.tsx[2m > [22m[2mFilesTab[2m > [22m[2mrenders detected files
[22m[39mIn HTML, whitespace text nodes cannot be a child of <tr>. Make sure you don't have any extra whitespace between tags on each line of your source code.
This will cause a hydration error.

  <FilesTab packet={{id:"packet-1", ...}}>
    <div className="p-4">
      <Table>
        <div className="relative w...">
          <table ref={null} className="w-full cap...">
            <TableCaption>
            <TableHeader>
            <TableBody>
              <tbody ref={null} className={"[&_tr:la..."}>
                <TableRow>
>                 <tr ref={null} className="border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted">
                    <TableCell>
                    <TableCell>
                    <TableCell>
                    <TableCell>
>                   {" "}
                    ...


 [32m‚úì[39m src/components/ThreatPanel.xss.test.tsx [2m([22m[2m1 test[22m[2m)[22m[32m 122[2mms[22m[39m
[90mstdout[2m | src/components/FilesTab.test.tsx[2m > [22m[2mFilesTab[2m > [22m[2mhandles file download
[22m[39mDownloaded file: test.txt, Hash: hash123
Chain of Custody event logged

[90mstderr[2m | src/components/FilesTab.test.tsx[2m > [22m[2mFilesTab[2m > [22m[2mdisplays message when no files detected
[22m[39mAn update to FilesTab inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

Not implemented: navigation to another Document
 [32m‚úì[39m src/components/FilesTab.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[32m 67[2mms[22m[39m
[90mstderr[2m | src/components/parser/PcapUpload.test.tsx[2m > [22m[2mPcapUpload Component[2m > [22m[2mrenders correctly
[22m[39mAn update to ChainOfCustodyLog inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 [32m‚úì[39m src/components/parser/PcapUpload.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[32m 68[2mms[22m[39m
 [32m‚úì[39m src/components/ProtocolFilter.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[32m 38[2mms[22m[39m
 [32m‚úì[39m src/components/FilterBar.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[32m 64[2mms[22m[39m
 [32m‚úì[39m src/components/FalsePositivesTab.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[32m 56[2mms[22m[39m
 [32m‚úì[39m src/services/localStorage.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [31m‚ùØ[39m src/components/PacketList.integration.test.tsx [2m([22m[2m7 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 1306[2mms[22m[39m
     [32m‚úì[39m should render PacketList, ProtocolFilter, and ProtocolDistributionChart[32m 56[2mms[22m[39m
     [32m‚úì[39m should filter packets by selected protocol[32m 35[2mms[22m[39m
     [32m‚úì[39m should display detected protocols as badges in PacketList[32m 16[2mms[22m[39m
     [32m‚úì[39m should update the ProtocolDistributionChart when packets change[32m 35[2mms[22m[39m
     [32m‚úì[39m should open PacketDetailView with correct packet data when a packet is clicked[32m 14[2mms[22m[39m
     [32m‚úì[39m should clear selected packet and close detail view when "Clear all packets" is confirmed[32m 36[2mms[22m[39m
[31m     [31m√ó[31m should clear selected packet and close detail view when selected packet is deleted[39m[33m 1112[2mms[22m[39m
 [32m‚úì[39m src/utils/sqlInjectionPatterns.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/utils/sensitiveDataDetector.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32m‚úì[39m src/utils/pcapUtils.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/utils/fileExtractor.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 7[2mms[22m[39m
[90mstderr[2m | src/utils/dataImportExport.test.ts[2m > [22m[2mdataImportExport[2m > [22m[2mimportDataFromJson[2m > [22m[2mshould fail if the file format is invalid
[22m[39mImport failed: Error: Invalid import file format: missing metadata or data section.
    at Module.importDataFromJson [90m(/Users/delphijc/Projects/net-pack-parser/client/[39msrc/utils/dataImportExport.ts:86:13[90m)[39m
    at [90m/Users/delphijc/Projects/net-pack-parser/client/[39msrc/utils/dataImportExport.test.ts:163:22
    at [90mfile:///Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:919:26
    at [90mfile:///Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1244:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1210:10[90m)[39m
    at [90mfile:///Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1654:37
    at Traces.$ [90m(file:///Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4mvitest[24m/dist/chunks/test.DqQZzsWf.js:234:21[90m)[39m

[90mstderr[2m | src/utils/dataImportExport.test.ts[2m > [22m[2mdataImportExport[2m > [22m[2mimportDataFromJson[2m > [22m[2mshould fail if the schema version is different
[22m[39mImport failed: Error: Invalid schema version. Expected 1.0, but file is version 0.9.
    at Module.importDataFromJson [90m(/Users/delphijc/Projects/net-pack-parser/client/[39msrc/utils/dataImportExport.ts:93:13[90m)[39m
    at [90m/Users/delphijc/Projects/net-pack-parser/client/[39msrc/utils/dataImportExport.test.ts:180:22
    at [90mfile:///Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:919:26
    at [90mfile:///Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1244:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1210:10[90m)[39m
    at [90mfile:///Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1654:37
    at Traces.$ [90m(file:///Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Users/delphijc/Projects/net-pack-parser/client/[39mnode_modules/[4mvitest[24m/dist/chunks/test.DqQZzsWf.js:234:21[90m)[39m

 [32m‚úì[39m src/utils/dataImportExport.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 12[2mms[22m[39m
 [32m‚úì[39m src/utils/hashGenerator.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32m‚úì[39m src/utils/sqlInjectionDetector.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m src/utils/stringExtractorCore.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 22[2mms[22m[39m
 [32m‚úì[39m src/components/AdvancedSearchPanel.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[33m 1842[2mms[22m[39m
     [33m[2m‚úì[22m[39m allows entering criteria and submitting search [33m 617[2mms[22m[39m
     [33m[2m‚úì[22m[39m saves a new search configuration [33m 414[2mms[22m[39m
 [32m‚úì[39m src/utils/commandInjectionDetector.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/utils/multiCriteriaSearch.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/utils/iocDetector.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/utils/bpfFilter.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/utils/xssDetector.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/utils/protocolDetector.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32m‚úì[39m src/components/HexDumpViewer.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/utils/directoryTraversalDetector.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32m‚úì[39m src/store/alertStore.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 2[2mms[22m[39m
 [32m‚úì[39m src/utils/pcapUtils.verification.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 1[2mms[22m[39m
 [32m‚úì[39m src/services/mitreService.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 1[2mms[22m[39m
 [32m‚úì[39m src/services/yaraEngine.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 1[2mms[22m[39m
[90mstdout[2m | src/utils/stringExtractor.test.ts[2m > [22m[2mstringExtractor[2m > [22m[2mshould reject with an error on failure
[22m[39m[StringExtractor] Sending request a4c5b0fc-0b19-453a-bab7-a1a354c94cec to worker
[StringExtractor] Received response for undefined, status: error

[90mstdout[2m | src/utils/stringExtractor.test.ts[2m > [22m[2mstringExtractor[2m > [22m[2mshould reject with a default error message if none provided on failure
[22m[39m[StringExtractor] Sending request eeb19839-8c5d-48d3-8ba1-9f92b52e6798 to worker
[StringExtractor] Received response for undefined, status: error

[90mstdout[2m | src/utils/stringExtractor.test.ts[2m > [22m[2mstringExtractor[2m > [22m[2mshould reject when worker throws an error event
[22m[39m[StringExtractor] Sending request 3e03775e-4a22-4522-8493-3cb4bda0df7e to worker

[90mstderr[2m | src/utils/stringExtractor.test.ts[2m > [22m[2mstringExtractor[2m > [22m[2mshould reject when worker throws an error event
[22m[39mWorker error: { message: [32m'Worker crashed'[39m }

 [31m‚ùØ[39m src/utils/stringExtractor.test.ts [2m([22m[2m6 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[33m 15048[2mms[22m[39m
     [32m‚úì[39m should instantiate the worker[32m 32[2mms[22m[39m
[31m     [31m√ó[31m should post a message to the worker with the correct payload[39m[32m 4[2mms[22m[39m
[31m     [31m√ó[31m should resolve with extracted strings on success[39m[33m 5004[2mms[22m[39m
[31m     [31m√ó[31m should reject with an error on failure[39m[33m 5002[2mms[22m[39m
[31m     [31m√ó[31m should reject with a default error message if none provided on failure[39m[33m 5001[2mms[22m[39m
     [32m‚úì[39m should reject when worker throws an error event[32m 3[2mms[22m[39m

[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m[1m[41m Failed Tests 6 [49m[22m[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m

[41m[1m FAIL [22m[49m src/components/PacketList.integration.test.tsx[2m > [22mPacketList Integration with ProtocolFilter, PacketDetailView and ProtocolDistributionChart[2m > [22mshould clear selected packet and close detail view when selected packet is deleted
[31m[1mAssertionError[22m[39m: expected "vi.fn()" to be called with arguments: [ 'packet-1' ][90m

Number of calls: [1m0[22m
[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body[39m
    [33mdata-scroll-locked[39m=[32m"1"[39m
    [33mstyle[39m=[32m"pointer-events: none;"[39m
  [36m>[39m
    [36m<span[39m
      [33maria-hidden[39m=[32m"true"[39m
      [33mdata-aria-hidden[39m=[32m"true"[39m
      [33mdata-radix-focus-guard[39m=[32m""[39m
      [33mstyle[39m=[32m"outline: none; opacity: 0; position: fixed; pointer-events: none;"[39m
      [33mtabindex[39m=[32m"0"[39m
    [36m/>[39m
    [36m<div[39m
      [33maria-hidden[39m=[32m"true"[39m
      [33mdata-aria-hidden[39m=[32m"true"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"grid grid-cols-3 gap-6 h-screen"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"col-span-1 flex flex-col space-y-4"[39m
        [36m>[39m
          [36m<select[39m
            [33mdata-testid[39m=[32m"select-protocol-filter"[39m
          [36m>[39m
            [36m<div[39m
              [33mdata-testid[39m=[32m"select-trigger"[39m
            [36m>[39m
              [36m<span[39m
                [33mdata-testid[39m=[32m"select-value"[39m
              [36m>[39m
                [0mFilter by Protocol[0m
              [36m</span>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mdata-testid[39m=[32m"select-content"[39m
            [36m>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"all"[39m
              [36m>[39m
                [0mAll Protocols[0m
              [36m</option>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"TCP"[39m
              [36m>[39m
                [0mTCP[0m
              [36m</option>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"HTTP"[39m
              [36m>[39m
                [0mHTTP[0m
              [36m</option>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"UDP"[39m
              [36m>[39m
                [0mUDP[0m
              [36m</option>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"DNS"[39m
              [36m>[39m
                [0mDNS[0m
              [36m</option>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"HTTPS"[39m
              [36m>[39m
                [0mHTTPS[0m
              [36m</option>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"SSH"[39m
              [36m>[39m
                [0mSSH[0m
              [36m</option>[39m
            [36m</div>[39m
          [36m</select>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-card border border-white/10 rounded-lg shadow-sm flex flex-col overflow-hidden backdrop-blur-sm h-full"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"p-3 border-b border-white/10 bg-card/50"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex justify-between items-center mb-3"[39m
              [36m>[39m
                [36m<h2[39m
                  [33mclass[39m=[32m"text-sm font-semibold flex items-center text-foreground"[39m
                [36m>[39m
                  [0mCaptured Packets[0m
                  [36m<span[39m
                    [33mclass[39m=[32m"ml-2 text-xs bg-secondary px-2 py-0.5 rounded-full text-muted-foreground"[39m
                  [36m>[39m
                    [0m4[0m
                  [36m</span>[39m
                [36m</h2>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"text-xs text-destructive hover:text-destructive/80 flex items-center transition-colors"[39m
                  [33mtitle[39m=[32m"Clear all packets"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-trash2 lucide-trash-2 mr-1"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"14"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"14"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M10 11v6"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M14 11v6"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M3 6h18"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mClear[0m
                [36m</button>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex space-x-2 mb-3"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"relative flex-1"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-2.5 text-muted-foreground"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"14"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"14"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"m21 21-4.34-4.34"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"11"[39m
                      [33mcy[39m=[32m"11"[39m
                      [33mr[39m=[32m"8"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [36m<input[39m
                    [33mclass[39m=[32m"w-full bg-secondary border border-white/10 rounded-md pl-9 pr-3 py-2 text-xs focus:ou...
[36m [2m‚ùØ[22m src/components/PacketList.integration.test.tsx:[2m467:37[22m[39m
    [90m465| [39m
    [90m466| [39m    [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m467| [39m      [34mexpect[39m(database[33m.[39mdeletePacket)[33m.[39m[34mtoHaveBeenCalledWith[39m([32m'packet-1'[39m)[33m;[39m
    [90m   | [39m                                    [31m^[39m
    [90m468| [39m      [34mexpect[39m(
    [90m469| [39m        screen[33m.[39m[34mqueryByTestId[39m([32m'mock-packet-detail-view'[39m)[33m,[39m
[90m [2m‚ùØ[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2m‚ùØ[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2m‚ùØ[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1/6]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/components/SettingsPage.test.tsx[2m > [22mSettingsPage[2m > [22mcalls clearAll when confirmation is accepted
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ ObjectContaining{‚Ä¶} ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[32m-   ObjectContaining {[90m
[32m-     "description": "All local data cleared successfully.",[90m
[31m+   {[90m
[31m+     "description": "All local data (packets, files, logs, settings) cleared successfully.",[90m
[2m      "title": "Success",[22m
[2m    },[22m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2m‚ùØ[22m src/components/SettingsPage.test.tsx:[2m69:23[22m[39m
    [90m 67| [39m
    [90m 68| [39m    [34mexpect[39m(localStorageService[33m.[39mclearAll)[33m.[39m[34mtoHaveBeenCalled[39m()[33m;[39m
    [90m 69| [39m    [34mexpect[39m(mockToast)[33m.[39m[34mtoHaveBeenCalledWith[39m(
    [90m   | [39m                      [31m^[39m
    [90m 70| [39m      expect[33m.[39m[34mobjectContaining[39m({
    [90m 71| [39m        title[33m:[39m [32m'Success'[39m[33m,[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[2/6]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/utils/stringExtractor.test.ts[2m > [22mstringExtractor[2m > [22mshould post a message to the worker with the correct payload
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ { payload: , ‚Ä¶(2) }, [  ] ][90m

Received: 

[1m  1st vi.fn() call:

[22m[33m@@ -10,10 +10,11 @@[90m
[2m        0,[22m
[2m        0,[22m
[2m        0,[22m
[2m      ],[22m
[2m      "payloadOffset": 0,[22m
[31m+     "requestId": "3a4584ef-c824-4191-8d09-5a6cc38f15cd",[90m
[2m    },[22m
[2m    [[22m
[2m      ArrayBuffer [[22m
[2m        0,[22m
[2m        0,[22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2m‚ùØ[22m src/utils/stringExtractor.test.ts:[2m67:44[22m[39m
    [90m 65| [39m    [34mextractStrings[39m(mockPayload[33m,[39m mockPacketId[33m,[39m mockOffset)[33m;[39m
    [90m 66| [39m
    [90m 67| [39m    [34mexpect[39m(lastCreatedWorker[33m?.[39mpostMessage)[33m.[39m[34mtoHaveBeenCalledWith[39m(
    [90m   | [39m                                           [31m^[39m
    [90m 68| [39m      {
    [90m 69| [39m        payload[33m:[39m mockPayload[33m,[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[3/6]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/utils/stringExtractor.test.ts[2m > [22mstringExtractor[2m > [22mshould resolve with extracted strings on success
[31m[1mError[22m: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[36m [2m‚ùØ[22m src/utils/stringExtractor.test.ts:[2m77:3[22m[39m
    [90m 75| [39m  })[33m;[39m
    [90m 76| [39m
    [90m 77| [39m  [34mit[39m([32m'should resolve with extracted strings on success'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m   | [39m  [31m^[39m
    [90m 78| [39m    [35mconst[39m mockPayload [33m=[39m [35mnew[39m [33mArrayBuffer[39m([34m8[39m)[33m;[39m
    [90m 79| [39m    [35mconst[39m mockPacketId [33m=[39m [32m'packet-1'[39m[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[4/6]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/utils/stringExtractor.test.ts[2m > [22mstringExtractor[2m > [22mshould reject with an error on failure
[31m[1mError[22m: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[36m [2m‚ùØ[22m src/utils/stringExtractor.test.ts:[2m104:3[22m[39m
    [90m102| [39m  })[33m;[39m
    [90m103| [39m
    [90m104| [39m  [34mit[39m([32m'should reject with an error on failure'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m   | [39m  [31m^[39m
    [90m105| [39m    [35mconst[39m mockPayload [33m=[39m [35mnew[39m [33mArrayBuffer[39m([34m8[39m)[33m;[39m
    [90m106| [39m    [35mconst[39m promise [33m=[39m [34mextractStrings[39m(mockPayload[33m,[39m [32m'packet-1'[39m[33m,[39m [34m0[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[5/6]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/utils/stringExtractor.test.ts[2m > [22mstringExtractor[2m > [22mshould reject with a default error message if none provided on failure
[31m[1mError[22m: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[36m [2m‚ùØ[22m src/utils/stringExtractor.test.ts:[2m117:3[22m[39m
    [90m115| [39m  })[33m;[39m
    [90m116| [39m
    [90m117| [39m  it('should reject with a default error message if none provided on f‚Ä¶
    [90m   | [39m  [31m^[39m
    [90m118| [39m    [35mconst[39m mockPayload [33m=[39m [35mnew[39m [33mArrayBuffer[39m([34m8[39m)[33m;[39m
    [90m119| [39m    [35mconst[39m promise [33m=[39m [34mextractStrings[39m(mockPayload[33m,[39m [32m'packet-1'[39m[33m,[39m [34m0[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[6/6]‚éØ[22m[39m

[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m[1m[41m Unhandled Errors [49m[22m[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m
[31m[1m
Vitest caught 1 unhandled error during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.[22m[39m

[31m‚éØ‚éØ‚éØ‚éØ[39m[1m[41m Unhandled Rejection [49m[22m[31m‚éØ‚éØ‚éØ‚éØ‚éØ[39m
[31m[1mError[22m: Worker crashed[39m
[36m [2m‚ùØ[22m src/utils/stringExtractor.ts:[2m49:7[22m[39m
    [90m 47| [39m  pendingRequests[33m.[39m[34mforEach[39m((pending) [33m=>[39m {
    [90m 48| [39m    pending[33m.[39m[34mreject[39m(
    [90m 49| [39m      [35mnew[39m [33mError[39m(error[33m.[39mmessage [33m||[39m [32m'Error in string extraction worker'[39m)[33m,[39m
    [90m   | [39m      [31m^[39m
    [90m 50| [39m    )[33m;[39m
    [90m 51| [39m  })[33m;[39m
[90m [2m‚ùØ[22m MockWorker.stringExtractionWorker.onerror src/utils/stringExtractor.ts:[2m47:19[22m[39m
[90m [2m‚ùØ[22m MockWorker.emitError src/utils/stringExtractor.test.ts:[2m29:12[22m[39m
[90m [2m‚ùØ[22m src/utils/stringExtractor.test.ts:[2m136:24[22m[39m
[90m [2m‚ùØ[22m node_modules/@vitest/runner/dist/index.js:[2m145:11[22m[39m
[90m [2m‚ùØ[22m node_modules/@vitest/runner/dist/index.js:[2m919:26[22m[39m
[90m [2m‚ùØ[22m node_modules/@vitest/runner/dist/index.js:[2m1244:20[22m[39m
[90m [2m‚ùØ[22m runWithTimeout node_modules/@vitest/runner/dist/index.js:[2m1210:10[22m[39m

[31mThis error originated in "[1msrc/utils/stringExtractor.test.ts[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m
[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m


[2m Test Files [22m [1m[31m3 failed[39m[22m[2m | [22m[1m[32m34 passed[39m[22m[90m (37)[39m
[2m      Tests [22m [1m[31m6 failed[39m[22m[2m | [22m[1m[32m246 passed[39m[22m[90m (252)[39m
[2m     Errors [22m [1m[31m1 error[39m[22m
[2m   Start at [22m 20:57:43
[2m   Duration [22m 15.69s[2m (transform 1.43s, setup 2.02s, import 3.69s, tests 21.01s, environment 11.27s)[22m

