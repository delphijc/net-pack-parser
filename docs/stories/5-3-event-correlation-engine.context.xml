<?xml version="1.0" ?>
<story-context id="bmad/story-context/template" v="1.0">
  <metadata>
    <epicId>5</epicId>
    <storyId>5.3</storyId>
    <title>Event Correlation Engine</title>
    <status>ready-for-dev</status>
    <generatedAt>2025-12-06</generatedAt>
    <sourceStoryPath>docs/stories/5-3-event-correlation-engine.md</sourceStoryPath>
  </metadata>
  <story>
    <asA>developer</asA>
    <iWant>related packets (like a TCP session) to be automatically grouped</iWant>
    <soThat>I can follow a specific conversation without manual filtering</soThat>
    <tasks>

</tasks>
  </story>
  <acceptanceCriteria>

</acceptanceCriteria>
  <artifacts>
    <docs>
      <doc>
        <path>`client/src/utils/pcapUtils.ts` (Parsing logic)</path>
        <title>pcapUtils.ts` (Parsing logic)</title>
        <section>Related File</section>
      </doc>
      <doc>
        <path>`client/src/types/index.ts` (Packet interface update)</path>
        <title>index.ts` (Packet interface update)</title>
        <section>Related File</section>
      </doc>
      <doc>
        <path>`client/src/components/PacketList.tsx`</path>
        <title>PacketList.tsx`</title>
        <section>Related File</section>
      </doc>
    </docs>
  </artifacts>
  <tests>
    <ideas>
- **Flow Hash**: `flowId = hash(sorted(src, dst) + sorted(port, port) + proto)`. Sorting ensures A-&gt;B and B-&gt;A share the same ID.
- **Performance**: Calculate this during parsing (Story 1.4 logic update) or lazily. Pre-calculation is better for performance.
</ideas>
  </tests>
  <constraints/>
  <interfaces/>
</story-context>
